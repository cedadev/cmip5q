{% extends "base.html" %}
{% block content %}

<div class="inner">

    <div class="boxer">
        <h1> Experiment {{e}} </h1>
        <p><em>{{e.rationale}}</em></p>
        <p>{{e.description}} </p>
        <p> Duration {{e.requiredDuration.startDate}} to {{e.requiredDuration.endDate}} (calendar:{{e.requiredCalendar}}, length {{e.requiredDuration.length}} years).</p> 
    </div>
    
    <div class="boxer">
        <h4> Requirements </h4>
        <div class="backgrey">
            <table>
                {% for r in reqs %}
                    <tr><td>{{r.name}}</td><td>{{r.ctype}}</td>
                        <td><table class="backgrey">
                            <tr><td colspan="3">
                            {% if r.description %}{{r.description}}{% endif %}
                            {% if r.spatiotemporalconstraint %}
                                {% if r.spatiotemporalconstraint.outputPeriod %}
                                    <br/>Output Period:{{r.spatiotemporalconstraint.outputPeriod }} {% endif %}
                                {% if r.spatiotemporalconstraint.frequencyUnits %}
                                    <br/>Output Frequency:{{r.spatiotemporalconstraint.frequencyUnits }} {% endif %}
                            {% endif %}
                            </td></tr>
                            <!-- Can only handle one level down ... we'd like django template recursion -->
                            {% for rr in r.consistsOf.all %} 
                            <tr><td>{{rr.name}}</td><td>{{rr.ctype}}</td>
                                <td>
                                {% if rr.description %}{{rr.description}} {% endif %}
                             
                                {% if rr.consistsOf.all %} (Further requirement children ommitted {% endif %}
                                </td>
                             </tr>
                            {% endfor %}
                        </table></td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        
    </div>
    
    <div class="boxer">
        <p class="cmip5q"> Placeholder for a list of centres and simulation numbers which have been documented for this experiment </p>
    </div>

</div>

{% endblock %}