{% extends "base.html" %}
{% block content %}

<div class="boxer">
<h1> Summary: {{centre.name}} ({{centre.abbrev}}) </h1>
</div>
<div class="boxer">
<h4> Introduction </h4>
<p>Each CMIP5 modelling centre performs <em> Simulations </em> which run <em> Models </em> on <em> 
Platforms</em>. The purpose of this questionnaire is to glean information about these platforms, models and simulations and how the simulations conformed to the CMIP5 experiment requirements. We expect each centre to describe at least one platform, one model and multiple simulations following the workflow listed below: 
<ol><li>Describe a Platform</li><li>Describe a Model and Grid</li><li>Describe some Simulations</li></ol>
It is not possible to start entering simulation information until at least one model and one platform 
have been described. <br>  Each new platform, grid and model you create will be given a generic name you will need to give these more appropriate short names so they can be distinguished from each other.   
</p>
<h4>Definitions</h4>
<p><em> Models </em> are made up of <em>Components</em>.</p>
<p><em> Simulations </em> conform to the <em>Numerical Requirements</em> of <em> Experiments</em>
 via what we call <em>Conformances</em>. 
<p><em> Conformances </em>will consist of either specific code characteristics (defined here as <em>model modifications</em>) or the use of specific boundary or initial conditions.</p>


</div>

<div class="boxer">

<h4> </h4>
<table>
<tr><td width="50%">
	<p></p>
	<div class="boxer">
    <table width="100%">
        <thead>
        <tr><th colspan="2"> Computing platforms associated with {{centre.abbrev}}</td></tr>
        </thead>
        <tbody>
        {% for m in platforms %}
        <tr class="{% cycle 'row2' 'row1'%}" ><td width="50%">{{m.abbrev}}</td>
        <td><span class="{{m.qstatus}}"><a id="edPlatButton{{forloop.counter}}" href="{{m.url}}">edit</a></span></td></tr>
        <script type="text/javascript">
            var oLinkButtonEdPlat{{forloop.counter}} = new YAHOO.widget.Button("edPlatButton{{forloop.counter}}");
        </script>
        {% endfor %}
        </tbody>
        <tr class="row3"><td colspan="2"><a id="newPlatButton" href="{{newplat}}">Add a new Platform</a></td></tr>
    </table>
    <script type="text/javascript">
        var newplatButton = new YAHOO.widget.Button("newPlatButton"); 
    </script>
    </div>
    <p></p>
	<div  class="boxer">
    <table width="100%">
        <thead>
            <tr><th colspan="4"> Grids associated with {{centre.abbrev}}</th></tr>
        </thead>
        <tbody> 
        {% for g in grids %}
        <tr class="{% cycle 'row2' 'row1'%}">
            <td width="45%">{{g.abbrev}}</td>
            <td><span class="{{g.qstatus}}"> <a id="edGridButton{{forloop.counter}}" href="{{g.url}}">Edit</a></span></td>
            <td><form action="{{g.cpURL}}" method="POST"><input id="gridcopySubmit{{forloop.counter}}" type="submit" value="Copy"></form></td>
        </tr>
        <script type="text/javascript">
            var oLinkButtonEdMod{{forloop.counter}} = new YAHOO.widget.Button("edGridButton{{forloop.counter}}");
            var ogridSubButtom{{forloop.counter}}= new YAHOO.widget.Button("gridcopySubmit{{forloop.counter}}",
                    {value:"gridcopySubmit{{forloop.counter}}value"});
        </script>    
        {% endfor %} 
        <tr class="row3"><td><a id="newGridButton" href="{{newgrid}}">Add a new grid</a></td></tr>
        </tbody>
    </table>
   
    <script type="text/javascript">
        var newmodButton = new YAHOO.widget.Button("newGridButton");
    </script>
    </div>
    <p></p>
    <div  class="boxer">
    <table width="100%">
        <thead>
            <tr><th colspan="4"> Models associated with {{centre.abbrev}}</th></tr>
            <tr><th colspan="3"></th> <th width=20%> Status </th>
        </thead>
        <tbody> 
        {% for m in models %}
        <tr class="{% cycle 'row2' 'row1'%}">
            <td width="45%">{{m.abbrev}}</td>
            <td><span class="{{m.qstatus}}"> <a id="edModButton{{forloop.counter}}" href="{{m.url}}">Edit</a></span></td>
            <td><form action="{{m.cpURL}}" method="POST"><input id="copySubmit{{forloop.counter}}" type="submit" value="Copy"></form></td>
            <td><p class="{% ifequal m.status 100.0 %}valid{% else %}invalid{%endifequal%}">{{m.status}}% valid</p></td>
        </tr>
        <script type="text/javascript">
            var oLinkButtonEdMod{{forloop.counter}} = new YAHOO.widget.Button("edModButton{{forloop.counter}}");
            var oSubButtom{{forloop.counter}}= new YAHOO.widget.Button("copySubmit{{forloop.counter}}",
                  {value:"copySubmit{{forloop.counter}}value"});
        </script>    
        {% endfor %} 
        <tr class="row3"><td><a id="newModButton" href="{{newmod}}">Add a new model</a></td><td colspan="3">It can take some time (minutes) to create a new model or copy an existing one ... be patient!</td></tr>
        <tbody>
    </table>
   
    <script type="text/javascript">
        var newmodButton = new YAHOO.widget.Button("newModButton");
    </script>
    <p class="guidance"> The status column provides an indication of how much of the model description has
    been completed. <!--CopyAsNew should be used to describe variants of already described models.--></p>
    </div>
</td>
<td>
    <div class="boxer">
        <table width="100%">
            <thead><tr><th>Files, References and Parties</th></tr></thead>
            <tbody>
                <tr class="row2"><td> There are {{refs|length }} references associated with {{centre}} </td></tr>
                <tr class="row1"><td> There are {{files|length }} files associated with {{centre}} </td></tr>
                <tr class="row2"><td> There are {{parties|length }} people and institutions associated with {{centre}} </td></tr>
            </tbody>
        </table> 
    </div>
    <p></p>
    <div class="boxer">
    <table width="100%">
        <thead>
        <tr><th>Simulations associated with {{centre.abbrev}}</th><tr>
        </thead>
        <tbody>
        {% for sgroup in sims %}
        <tr class="{% cycle 'row2' 'row1'%}"><td>{% for s in sgroup %} 
           <span class="{{s.qstatus}}">
           <a id="edSimButton{{s.id}}" href="{{s.url}}">{{s.abbrev}}</a></span>
           <script type="text/javascript">
                var oLinkEdSimBut{{forloop.counter}} = new YAHOO.widget.Button("edSimButton{{s.id}}");
           </script>
           {% endfor %}
        {% endfor %}
        <tr class="row3"><td><a id="viewSimBut" href="{{viewsimurl}}"> Manage Simulations (add new)</a></td></tr>
        </tbody>
        <script type="text/javascript">
            var oViewSimBut = new YAHOO.widget.Button("viewSimBut");
        </script>
    </table>
    </div>
</td>        
</tr>
</tbody>
</table>
</div> 
{% endblock %}