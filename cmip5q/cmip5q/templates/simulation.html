{% extends "base.html" %}
{% block content %}
<div class="boxer">
    <h2> {{label}} a simulation in {{exp}}</h2>
    <p>({{exp.rationale}} {{exp.why}})</p>
</div>

<table class="navmain">
    <tr>
        <td valign="top" width="200px">
        <div class="boxer">
            <p class="red"> All buttons and links in the tabs and this column navigate away from this page. Save your work first!</p>
        </div>
        <div class="boxer">
            {% ifnotequal label "Update" %}
                <p>After you have saved the initial simulation description, a set of buttons to 
                add further simulation characteristics will appear here.</p>
            {% else %}
                <h4> File Dependencies </h4>
                <p><a id="iclinkbut" href="{{urls.ic}}">Initial Conditions</a></p>
                <p><a id="bclinkbut" href="{{urls.bc}}">Boundary Conditions</a></p>
                <h4> Experiment Criteria</h4>
                <p><a id="conlinkbut" href="{{urls.con}}">Conformance</a></p>
                <h4> Ensemble Characteristics </h4>
                {% ifequal s.ensembleMembers 1 %}
                     Not an ensemble 
                {% else %}
                   <p><a id="enslinkbut" href="{{urls.ens}}"> Describe Ensemble</a></p>
                {% endifequal %}
            {% endifnotequal %}
        </div>
        <div class="boxer">
        <p class="cmip5q"> Placeholder for validate and view buttons </p>
        </div>
        </td>
        <td valign="top" width="900px">
            <div class="boxer">
                <h4> General Characteristics of the Simulation </h4>
                <p class="guidance"> In this box you fill out the general characteristics of the simulation (or ensemble). </p>
                <form action="{{urls.url}}" method="post">
                <table>
                <tr><td>Short Name:{{simform.abbrev.errors}} </td><td>{{simform.abbrev}}</td></tr>
                <tr><td>Long Name:{{simform.title.errors}} </td><td>{{simform.title}}</td></tr>
                <tr><td>Contact Email:{{simform.email.errors}} </td><td>{{simform.email}}</td></tr>
                <tr><td>Contact Name:{{simform.contact.errors}} </td><td>{{simform.contact}}</td></tr>
                <tr><td> Simulation used:  </td><td>Model</b>&nbsp;{{simform.numericalModel.errors}}{{simform.numericalModel}} running
                on <b> Platform </b> {{simform.platform.errors}}{{simform.platform}}.</td></tr> 
                <tr><td>Ensemble Members: </td><td>{{simform.ensembleMembers.errors}}{{simform.ensembleMembers}}
                </td></tr>
                <tr><td>Description (notes){{simform.description.errors}}</td><td>{{simform.description}}</td></tr>
                <tr><td colspan="2">
                <center><input id="simFormButton" type="submit" value="{{label}}"/>
               
                </center></td></tr>
                </table>
                </form>
            </div> <!-- right boxer -->
        </td>
    </tr>
</table>
<script type="text/javascript">
    var oLinkButton1 = new YAHOO.widget.Button("iclinkbut"); 
    var oLinkButton2 = new YAHOO.widget.Button("bclinkbut"); 
    var oLinkButton3 = new YAHOO.widget.Button("enslinkbut"); 
    var oLinkButton4 = new YAHOO.widget.Button("conlinkbut"); 
    var oSimFormButton = new YAHOO.widget.Button("simFormButton",{value:"simFormButtonvalue"}); 
</script>

<div class="boxer">
    {% if ensemble %}
    <h4> Ensemble Characteristics </h4>
    <p>{{ensemble.set.description}}</p>
    <table>
    {% for m in ensemble.members %}
    <tr><td>Member {{m.memberNumber}} has </td>
    {% if ensemble.set.perturbedPhysics %}
    <td> Code Modification: {{m.codeModification}}</td>
    {% else %}
     <td> Initial Condition: {{m.initialCondition}}</td>
    {% endif %}
    </tr>
    {% endfor %}
    </table>
    {% endif %}

    <h4> Initial and Boundary Conditions </h4>
    {% ifnotequal label "Update" %}
    <p class="red"> This section cannot be filled in until the general characteristics have been saved </p>
    {% endifnotequal %}
    {% ifequal label "Update" %}
    <p>(You can modify these using the buttons on the left hand menu.)</p>
    <table>
    {% if s.initialCondition %}
    <tr class="{% cycle 'row1' 'row2'%}"><td>Inital Condition:&nbsp;</td><td>{{s.initialCondition}}</td></tr>
    {% else %}
    <tr><td colspan="2"> <span class="red">You need to set an initial Condition</span></td></tr>
    {% endif %}
    {% for bc in cset %}
    <tr class="{%cycle  'row2' 'row1'%}"><td>Boundary Condition:&nbsp;</td><td>{{bc.name}} uses {{bc.nic}} internal link(s) and {{bc.nec}} link(s) to files. {% if not bc.valid %} <span class="red"> Incomplete </span> {% endif %} </td></tr>
    {% endfor %}
    </table>
    <p class="guidance"> (Each boundary condition must have at least one internal or external coupling.) </p>
    {% endifequal %}
</div>
<div class="boxer backgrey">
<h4> Conformance: How this simulation conforms to the numerical requirements of experiment {{exp}}</h4>
{% ifnotequal label "Update" %}
<p class="red"> This section cannot be filled in until the general characteristics have been saved </p>
{% else %}
 <p>(You can modify these using the button on the left hand menu.)</p>
<table>
{% for c in coset %}
<tr class="{% cycle 'row1' 'row2'%}"><td>{{c.name}}</td><td>{% if c.method %} {{c.method}} {% else %} <span class="red">Not conformant?</span>{% endif %}</tr>
{% endfor %}
</table>
{% endifnotequal %}

</div>
        
{% endblock %}